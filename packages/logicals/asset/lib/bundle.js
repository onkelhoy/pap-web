var F=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var m=(t,e,n,r)=>{for(var i=r>1?void 0:r?U(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&F(e,n,i),i};var S=Object.defineProperty,V=Object.getOwnPropertyDescriptor,c=(t,e)=>S(t,"name",{value:e,configurable:!0}),W=(t,e,n,r)=>{for(var i=r>1?void 0:r?V(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&S(e,n,i),i};function E(t,e){switch(e.name){case"Object":case"Array":return JSON.stringify(t);default:return String(t)}}c(E,"ConvertToString");function R(t,e,n){var r;let i=(r=this.properties)==null?void 0:r[t];i||(i={attribute:n.attribute?e:!1,propertyKey:t,type:n.type,typeName:n.type.name},this.properties[t]=i,i.attribute&&this.attributeToPropertyMap.set(i.attribute,i.propertyKey))}c(R,"getInfo");var J={type:String,attribute:!0,rerender:!0,verbose:!1};function f(t){let e={...J,...t||{}};return function(n,r){let i=`_${r}`,o=(typeof e.attribute=="string"?e.attribute:r).toLowerCase(),s,l=n.constructor,a=l.observedAttributes||[];a.some(d=>d===o)||a.push(o),l.observedAttributes=a,Object.defineProperty(n,r,{set(d){s=d}});let u=n.connectedCallback;n.connectedCallback=function(){try{Object.defineProperty(this,r,{configurable:!1,get(){let d=this[i];return e!=null&&e.get?e.get.call(this,d):d},set(d){var h;e!=null&&e.set&&(d=e.set.call(this,d));let re=R.call(this,r,o,e),v=E(d,e.type);if(this.delayedAttributes&&this.delayedAttributes[o]&&this.delayedAttributes[o]===v||E(this[i],e.type)===v)return;e.attribute&&(this.delayedAttributes||(this.delayedAttributes={}),this.delayedAttributes[o]!==v&&(this.delayedAttributes[o]=v,this.updateAttribute())),e!=null&&e.before&&e.before.call(this,d);let I=this[i];this[i]=d,e.rerender&&((h=this.requestUpdate)==null||h.call(this)),e!=null&&e.after&&e.after.call(this,d,I),e.context&&this.dispatchEvent(new Event(`context-${r}`))}})}catch{}this[r]||(this[r]=s),u?.call(this)}}}c(f,"Decorator");function K(t){let e={selector:""};return typeof t=="string"?e.selector=t:(e.selector=t.selector,e.load=t.load),function(n,r){let i=r+"rerender_attempts_",o=r+"timeout_attempts_",s=n.connectedCallback||function(){};n.connectedCallback=function(){s.call(this),l.call(this)};function l(){d.call(this)||a.call(this)}c(l,"initsearch");function a(){let h=this[i]||0;h++,!d.call(this)&&h<5&&(this[o]=0,this[i]=h,setTimeout(()=>u.call(this),100),this.callAfterRender&&this.callAfterRender.push(()=>a.call(this)))}c(a,"rendersearch");function u(){let h=this[o]||0;h++,!d.call(this)&&h<3&&(this[o]=h,setTimeout(()=>u.call(this),100))}c(u,"timeoutsearch");function d(){if(this[r])return!0;if(this.shadowRoot){let h=this.shadowRoot.querySelector(e.selector);if(h)return this[r]=h,typeof e=="object"&&e.load&&e.load.call(this,h),!0}return!1}c(d,"search")}}c(K,"Decorator");function w(t,e=300){let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{t.apply(this,r),n=null},e)}}c(w,"debounce");function z(){let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?n:n&3|8).toString(16)})}c(z,"generateUUID");function g(t){if(t.parentElement)return t.parentElement;let e=t.getRootNode();return e?e.host:null}c(g,"NextParent");function X(t){let e=0,n=0;do e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent;while(t);return{top:e,left:n}}c(X,"CumulativeOffset");function Q(t){let e=t.assignedNodes(),n=[];return e.forEach(r=>L(r,n)),n}c(Q,"ExtractSlotValue");function L(t,e){if(t.hasChildNodes())t.childNodes.forEach(n=>L(n,e));else if(t.textContent){if(t.textContent.trim()==="")return;e.push(t.textContent)}}c(L,"appendLeafValue");function Y(t){return Math.abs(t)<1e3?t.toString():Math.abs(t)<1e6?Math.round(t*10/1e3)/10+"k":Math.abs(t)<1e9?Math.round(t*10/1e6)/10+"m":Math.abs(t)<1e12?Math.round(t*10/1e9)/10+"bn":Math.round(t*10/1e12)/10+"tn"}c(Y,"FormatNumber");function G(t){var e,n,r;if(t.classList.contains("mobile"))return"mobile";let i=window.getComputedStyle(t),o=Number((e=i.getPropertyValue("--breakpoint-desktop"))==null?void 0:e.replace("px",""))||320,s=Number((n=i.getPropertyValue("--breakpoint-laptop"))==null?void 0:n.replace("px",""))||768,l=Number((r=i.getPropertyValue("--breakpoint-pad"))==null?void 0:r.replace("px",""))||1024;return window.innerWidth>o?"desktop":window.innerWidth>s?"laptop":window.innerWidth>l?"pad":"mobile"}c(G,"DetectDevice");function T(t,e,n){return t+(e-t)*n}c(T,"lerp");function Z(t,e,n,r,i){let o=(t-e)/(n-e);return Math.min(i,Math.max(T(r,i,o),r))}c(Z,"lerpValue");function C(t){let e=[];for(let n=0;n<t.childNodes.length;n++){let r=t.childNodes[n];r.nodeType===8?e.push(r):e.push.apply(e,C(r))}return e}c(C,"findComments");function M(t,e,n,r){if(n===null)return;let i=r;for(let o=0;o<n.length;o++){let s=Number(n[o]);i=i[s]}try{t.insertBefore(i,e)}catch(o){console.error(o),console.log("what is going on here",t)}}c(M,"insertElement");function ee(t,...e){let n="";for(let o=0;o<e.length;o++){if(e[o]instanceof Array){let a=[];for(let u=0;u<e[o].length;u++)e[o][u]instanceof DocumentFragment&&a.push(`<!-- comment-node-${o}.${u} -->`);if(a.length>0){n+=t[o]+a.join(" ");continue}}if(e[o]instanceof DocumentFragment){n+=t[o]+`<!-- comment-node-${o} -->`;continue}let s=t[o].trim(),l=s.match(/.*\s(on|@)([\w-]*)=/);if(l){let[a,u,d]=l,h=s.split(u+d);n+=h[0]+` @${d}="${o}"`}else if(e[o]===void 0){let a=/\w+="$/;n+=t[o].replace(a,"")}else n+=t[o]+e[o]}n+=t[e.length];let r=document.createElement("template");r.innerHTML=n.trim();let i=r.content;return C(i).forEach(o=>{var s;let l=o.parentNode;if(l){let a=(s=o.nodeValue)==null?void 0:s.trim();if(a!=null&&a.startsWith("comment-node")&&o.textContent){let u=o.textContent.match(/\d+/g);M(l,o,u,e)}l.removeChild(o)}}),q(),i.querySelectorAll("*").forEach(o=>{Array.from(o.attributes).forEach(s=>{if(s.name.startsWith("@")){let l=s.name.slice(1),a=Number(o.getAttribute(s.name));o.removeAttribute(s.name),o.addEventListener(l,e[a])}}),o.removeAttribute('"')}),i}c(ee,"html");function k(t,e){if(!e.__eventListeners)for(let n in t.__eventListeners)for(let r of t.__eventListeners[n])e.addEventListener(n,r.listener,r.options)}c(k,"ReapplyEvents");function _(t,e){if(k(t,e),!(t instanceof HTMLSlotElement))for(let n=0;n<t.children.length;n++)_(t.children[n],e.children[n])}c(_,"ReapplyEventsDeep");function q(){if(window.eventListenersBeenInitialized)return;window.eventListenersBeenInitialized=!0;let t=Element.prototype.addEventListener,e=Element.prototype.removeEventListener,n=Element.prototype.cloneNode;Element.prototype.addEventListener=function(r,i,o){this.__eventListeners=this.__eventListeners||{};let s={listener:i,options:o};this.__eventListeners[r]=this.__eventListeners[r]||[];let l=this.__eventListeners[r].findIndex(a=>a.listener===i&&JSON.stringify(a.options)===JSON.stringify(o));l!==-1&&(e.call(this,r,this.__eventListeners[r][l].listener,this.__eventListeners[r][l].options),this.__eventListeners[r].splice(l,1)),this.__eventListeners[r].push(s),t.call(this,r,i,o)},Element.prototype.removeEventListener=function(r,i,o){if(this.__eventListeners&&this.__eventListeners[r]){let s=this.__eventListeners[r].findIndex(l=>l.listener===i&&o===l.options);s!==-1&&this.__eventListeners[r].splice(s,1)}e.call(this,r,i,o)},Element.prototype.cloneNode=function(r){let i=n.call(this,r);return r&&_(this,i),i},Element.prototype.getEventListeners=function(){return this.__eventListeners}}c(q,"InitEventListeners");function te(t){return t===void 0?void 0:String(t)}c(te,"ifDefined");function ne(t){let e={rerender:!0,verbose:!1,...t||{}};return function(n,r){e.name||(e.name=r),e.attribute||(e.attribute=r);let i=n.connectedCallback;n.connectedCallback=function(){let o=this,s=e.name+"_subcontext";o[s]=!0,i&&i.call(o),e.verbose&&console.log("connected-callback",e);let l=g(o);for(;l&&(e.verbose&&console.log("finding parent",l),!(e.name in l&&!(s in l)||e.attribute&&l.hasAttribute(e.attribute)&&!(s in l)));){if(e.verbose&&console.log("did not find",e.name,"in",l),l===document.documentElement){l=null;break}l=g(l)}if(e.verbose&&console.log("final parent",l),l){let a=c(()=>{e.verbose&&console.log("context-update",e.name,e.attribute);let u=o[e.name];if(e.name in l?o[e.name]=l[e.name]:e.attribute&&l.hasAttribute(e.attribute)&&(o[e.name]=l.getAttribute(e.attribute)),e.applyattribute){if(o[e.name]===void 0)this.removeAttribute(e.attribute);else if(!(o[e.name]instanceof Object)){let d=E(o[e.name],String);this.setAttribute(e.attribute,d)}}e.update&&e.update.call(this,o[e.name],u),e.rerender&&o.requestUpdate()},"operation");a(),l.addEventListener(`context-${e.name}`,a),l.addEventListener("context-manual-change-banana",a)}else console.warn(`Context provider for '${e.name}' not found.`)}}}c(ne,"Decorator");function A(t,e){switch(e.name){case"Boolean":return t===null?!1:t===""||t.toLowerCase()==="true";case"Number":return Number(t);case"Object":case"Array":return t===null?null:JSON.parse(t);default:return e(t)}}c(A,"ConvertFromString");function D(t,e){if(!e.shadowRoot){console.error("shadowroot not defined yet!");return}let n=e.shadowRoot.querySelector("style");if(n||(n=document.createElement("style"),e.shadowRoot.appendChild(n)),!t.reactiveStyling&&e.stylecomperator)return;let r=e.getStyle();e.stylecomperator||(e.stylecomperator=document.createElement("style"),n.innerHTML=r),e.stylecomperator.innerHTML=r,e.stylecomperator.innerHTML!==n.innerHTML&&(n.innerHTML=e.stylecomperator.innerHTML)}c(D,"renderStyle");function O(t,e){if(!e.shadowRoot){console.error("shadowroot not defined yet!");return}if(!e.render){console.error("render not defined yet");return}let n=e.render();if(!e.rendercomperator){e.rendercomperator=document.createElement("template"),y(e,n,e.shadowRoot);return}t.reactiveRendering?j(e,n):($(e.shadowRoot),y(e,n,e.shadowRoot))}c(O,"renderHTML");function y(t,e,n){if(["string","number","boolean"].includes(typeof e)){let r=(e||"").toString();if(/</.test(r)&&/>/.test(r))n.innerHTML=n.innerHTML+r;else{let i=document.createTextNode(r);n.appendChild(i)}}else e instanceof DocumentFragment?n.appendChild(e):e instanceof Array&&e.forEach(r=>{y(t,r,n)})}c(y,"freshRender");function $(t){t.childNodes.forEach(e=>{e.nodeName!=="STYLE"&&t.removeChild(e)})}c($,"flushHTML");function j(t,e){var n;if(!t.rendercomperator)return;let r=t.rendercomperator.querySelectorAll("*:not(style)");for(let i of r)(n=i.parentNode)==null||n.removeChild(i);for(;t.rendercomperator.firstChild;)t.rendercomperator.removeChild(t.rendercomperator.firstChild);t.rendercomperator.appendChild(t.stylecomperator),y(t,e,t.rendercomperator),P(t),H(t)}c(j,"diffing");function H(t){t.shadowRoot&&t.rendercomperator&&t.shadowRoot.querySelectorAll("*:not(style)").forEach(e=>{if(!e.parentNode)return;let n=x(t,t.shadowRoot,e);t.rendercomperator.querySelector(n.join(" > "))||n.some(r=>/render-greedy/.test(r))||e.parentNode.removeChild(e)})}c(H,"cleanup");function P(t){if(!t.shadowRoot||!t.rendercomperator)return;let e=t.rendercomperator.cloneNode(!0);e.querySelectorAll("*:not(style)").forEach(n=>{let r=x(t,e,n),i=t.rendercomperator.querySelector(r.join(" > "));if(i){for(let s in i.__eventListeners)if(!n.__eventListeners[s]){let l=i.__eventListeners[s],{listener:a,options:u}=l[l.length-1];n.addEventListener(s,a,u)}}let o=t.querySelector(r.join(" > "));if(o){for(let s=0;s<n.attributes.length;s++){let l=n.attributes[s].name,a=n.attributes[s].value;o.getAttribute(l)!==a&&o.setAttribute(l,a)}n.childNodes.forEach((s,l)=>{var a;if(s.nodeType===Node.TEXT_NODE){if(((a=s.textContent)==null?void 0:a.trim())==="")return;let u=o.childNodes[l];u?u.nodeType===Node.TEXT_NODE?u.textContent!==s.textContent&&(u.textContent=s.textContent):(console.error("[ERROR] if this can be seen we must update (1)"),console.log({shadowTextNode:u,child:s,content:s.textContent})):o.childNodes.length===0?o.textContent=s.textContent:(console.error("[ERROR] if this can be seen we must update (2)"),console.log({child:s,content:s.textContent,shadowNode:o}))}})}else{let s=t.shadowRoot,l=n;if(r.length>1)for(let a=r.length-1;a>=0;a--){let u=t.querySelector(r.slice(0,a).join(" > "));if(u){s=u;break}else l=n.parentElement}if(l){let a=N(t,e,n);a?s?.insertBefore(l,a):s?.appendChild(l)}else console.error("[ERROR] this case should not happen"),console.log({shadowtarget:s,node:n,target:l,path:r})}})}c(P,"clone");function x(t,e,n){let r=[];for(;n!==e;){r.push(B(n));let i=n.parentElement;if(i)n=i;else break}return r.reverse()}c(x,"getComposedPath");function B(t){let e=[t.tagName];if(t.id?e.push("#"+t.id):t.hasAttribute("key")?e.push(`[key="${t.getAttribute("key")}"]`):t.hasAttribute("part")?e.push(`[part="${t.getAttribute("part")}"]`):typeof t.className=="string"&&t.className&&e.push("."+t.className.trim().replace(/ /g,".")),t.hasAttribute("render-greedy")&&e.push("[render-greedy]"),e.length===1&&t.parentNode&&t.parentNode.children.length>1){let n=0;for(let r=0;r<t.parentNode.children.length;r++)if(t.parentNode.children[r]===t){n=r;break}e.push(`:nth-child(${n+1})`)}return e.join("")}c(B,"getSelector");function N(t,e,n){if(n.nextElementSibling){let r=x(t,e,n.nextElementSibling);return t.querySelector(r.join(" > "))||N(t,e,n.nextElementSibling)}return null}c(N,"getNextElement");var b=class extends HTMLElement{constructor(t){super(),this.attributeinit=!1,this.delayedAttributes={},this.callAfterRender=[],this.attributeToPropertyMap=new Map,this.hasrendered=!1,this.properties={},this.hasFocus=!1,this.handleblur=c(()=>{this.hasFocus=!1},"handleblur"),this.handlefocus=c(()=>{this.hasFocus=!0},"handlefocus"),this.setting={updateInterval:100,attributeUpdateInterval:10,reactiveRendering:!0,reactiveStyling:!1,noblur:!1,nofocus:!1,mode:"open",delegatesFocus:!1,noshadow:!1,...t||{}},this.setting.noshadow||this.attachShadow({...this.setting}),this.callAfterRender.push(this.firstRender),this.originalHTML=this.outerHTML,this.setting.noblur||this.addEventListener("blur",this.handleblur),this.setting.noblur||this.addEventListener("focus",this.handlefocus),this.requestUpdate=w(this.requestUpdate,this.setting.updateInterval),this.updateAttribute=w(this.updateAttribute,this.setting.attributeUpdateInterval)}connectedCallback(){var t;this.attributeinit=!1,this.dispatchEvent(new Event("connected")),(t=this.requestUpdate)==null||t.call(this)}disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}attributeChangedCallback(t,e,n){let r=this.delayedAttributes[t];if(delete this.delayedAttributes[t],e!==n&&!r){let i=this.attributeToPropertyMap.get(t);if(i){let o=this.properties[i];o?this[o.propertyKey]=A(n,o.type):console.warn("[BASE]: not delayed not prop options",t)}}}firstRender(){var t;this.hasrendered=!0,(t=this.updateAttribute)==null||t.call(this)}__update(){if(!this.shadowRoot)return;D(this.setting,this),O(this.setting,this);let t,e=this.callAfterRender.reverse();for(;t=e.pop();)typeof t=="object"&&t.callback.call(this,...t.args),t instanceof Function&&t.call(this);this.callAfterRender=[]}render(t){return"Hello From Base Class"}querySelector(t){return t?this.shadowRoot?this.shadowRoot.querySelector(t):null:(console.log("empty string"),null)}originalQuerySelector(t){return t?super.querySelector(t):(console.log("empty string"),null)}getProperties(){return this.properties||{}}getStyle(){var t;let e=this.constructor;return[...(t=e.styles)!=null?t:[],...typeof e.style=="string"?[e.style]:[]].join(" ")}shadow_closest(t){let e=g(this);for(;e;){let n=e.closest(t);if(n)return n;let r=e.querySelector(t);if(r)return r;if(e===document.documentElement)break;e=g(e)}}requestUpdate(){this.__update()}initAttributes(){if(this.attributeinit)return;this.attributeinit=!0;let t=this.attributes;for(let e=0;e<t.length;e++){let n=t[e].name,r=this.attributeToPropertyMap.get(n);if(r&&this.properties[r]){let i=t[e].value;i===""&&(i="true"),this[this.properties[r].propertyKey]=A(i,this.properties[r].type)}}}updateAttribute(){if(this.hasrendered){this.initAttributes();for(let t in this.delayedAttributes){let e=this.delayedAttributes[t];e===void 0?this.removeAttribute(t):this.setAttribute(t,e)}}}};c(b,"CustomElement"),b.observedAttributes=[],W([f({type:Boolean,rerender:!1})],b.prototype,"hasFocus",2);var p=class extends b{constructor(){super(...arguments);this.assetBase="/public";this.cache=!1}debouncedLoadAsset(){this.file&&this.loadAsset(this.file,!!this.url)}updateAssetBase(){this.debouncedLoadAsset()}async loadAsset(n,r=!1){try{let i=n;i[0]==="/"&&(i=i.slice(1,i.length));let o=r?n:`${this.assetBase}/${i}`;if(this.cache){let l=window.localStorage.getItem(`pap-assets-${o}`);if(l)return this.handleResponse(l),l}let s=await fetch(o);if(s.ok)return this.handleResponse(s),s;this.handleError(s)}catch(i){this.handleError(null,i)}return null}handleError(n,r){n?console.error("Error fetching asset:",n.status,n.statusText):r&&console.error("Something went wrong fetching asset:",r)}handleResponse(n){console.log("well look at that, a response!")}cacheData(n,r){let i=n;i[0]==="/"&&(i=i.slice(1,i.length));let o=`${this.assetBase}/${i}`;window.localStorage.setItem(`pap-assets-${o}`,r)}};m([f({attribute:"asset-base",set:function(t){return t[t.length-1]==="/"&&(t=t.slice(0,t.length-1)),t},after:function(){this.updateAssetBase()}})],p.prototype,"assetBase",2),m([f({type:Boolean})],p.prototype,"cache",2),m([f({after:function(){this.debouncedLoadAsset()}})],p.prototype,"file",2),m([f({after:function(){this.debouncedLoadAsset()}})],p.prototype,"url",2);if(!window.customElements)throw new Error("Custom Elements not supported");window.customElements.get("pap-asset")||window.customElements.define("pap-asset",p);export{p as Asset};
