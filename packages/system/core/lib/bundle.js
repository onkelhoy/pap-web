var L=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var l=(e,t)=>L(e,"name",{value:t,configurable:!0});var S=(e,t,r,n)=>{for(var i=n>1?void 0:n?H(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&L(t,r,i),i};function p(e,t){switch(t.name){case"Object":case"Array":return JSON.stringify(e);default:return String(e)}}l(p,"ConvertToString");function _(e,t,r){var i;let n=(i=this.properties)==null?void 0:i[e];n||(n={attribute:r.attribute?t:!1,propertyKey:e,type:r.type,typeName:r.type.name},this.properties[e]=n,n.attribute&&this.attributeToPropertyMap.set(n.attribute,n.propertyKey))}l(_,"getInfo");var P={type:String,attribute:!0,rerender:!0,verbose:!1};function y(e){let t={...P,...e||{}};return function(r,n){let i=`_${n}`,o=(typeof t.attribute=="string"?t.attribute:n).toLowerCase(),s,a=r.constructor,c=a.observedAttributes||[];c.some(f=>f===o)||c.push(o),a.observedAttributes=c,Object.defineProperty(r,n,{set(f){s=f}});let u=r.connectedCallback;r.connectedCallback=function(){try{Object.defineProperty(this,n,{configurable:!1,get(){let f=this[i];return t!=null&&t.get?t.get.call(this,f):f},set(f){var T;t!=null&&t.set&&(f=t.set.call(this,f));let d=_.call(this,n,o,t),g=p(f,t.type);if(this.delayedAttributes&&this.delayedAttributes[o]&&this.delayedAttributes[o]===g||p(this[i],t.type)===g)return;t.attribute&&(this.delayedAttributes||(this.delayedAttributes={}),this.delayedAttributes[o]!==g&&(this.delayedAttributes[o]=g,this.updateAttribute())),t!=null&&t.before&&t.before.call(this,f);let k=this[i];this[i]=f,t.rerender&&((T=this.requestUpdate)==null||T.call(this)),t!=null&&t.after&&t.after.call(this,f,k),t.context&&this.dispatchEvent(new Event(`context-${n}`))}})}catch(f){}this[n]||(this[n]=s),u==null||u.call(this)}}}l(y,"Decorator");function q(e){let t={selector:""};return typeof e=="string"?t.selector=e:(t.selector=e.selector,t.load=e.load),function(r,n){let i=n+"rerender_attempts_",o=n+"timeout_attempts_",s=r.connectedCallback||function(){};r.connectedCallback=function(){s.call(this),a.call(this)};function a(){f.call(this)||c.call(this)}l(a,"initsearch");function c(){let d=this[i]||0;d++,!f.call(this)&&d<5&&(this[o]=0,this[i]=d,setTimeout(()=>u.call(this),100),this.callAfterRender&&this.callAfterRender.push(()=>c.call(this)))}l(c,"rendersearch");function u(){let d=this[o]||0;d++,!f.call(this)&&d<3&&(this[o]=d,setTimeout(()=>u.call(this),100))}l(u,"timeoutsearch");function f(){if(this[n])return!0;if(this.shadowRoot){let d=this.shadowRoot.querySelector(t.selector);if(d)return this[n]=d,typeof t=="object"&&t.load&&t.load.call(this,d),!0}return!1}l(f,"search")}}l(q,"Decorator");function x(e,t=300){let r=null;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,n),r=null},t)}}l(x,"debounce");function st(){let e=new Date().getTime();return typeof performance!="undefined"&&typeof performance.now=="function"&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?r:r&3|8).toString(16)})}l(st,"generateUUID");function h(e){if(e.parentElement)return e.parentElement;let t=e.getRootNode();return t?t.host:null}l(h,"NextParent");function at(e){let t=0,r=0;do t+=e.offsetTop||0,r+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:r}}l(at,"CumulativeOffset");function lt(e){let t=e.assignedNodes(),r=[];return t.forEach(n=>C(n,r)),r}l(lt,"ExtractSlotValue");function C(e,t){if(e.hasChildNodes())e.childNodes.forEach(r=>C(r,t));else if(e.textContent){if(e.textContent.trim()==="")return;t.push(e.textContent)}}l(C,"appendLeafValue");function ct(e){return Math.abs(e)<1e3?e.toString():Math.abs(e)<1e6?Math.round(e*10/1e3)/10+"k":Math.abs(e)<1e9?Math.round(e*10/1e6)/10+"m":Math.abs(e)<1e12?Math.round(e*10/1e9)/10+"bn":Math.round(e*10/1e12)/10+"tn"}l(ct,"FormatNumber");function ut(e){var o,s,a;if(e.classList.contains("mobile"))return"mobile";let t=window.getComputedStyle(e),r=Number((o=t.getPropertyValue("--breakpoint-desktop"))==null?void 0:o.replace("px",""))||320,n=Number((s=t.getPropertyValue("--breakpoint-laptop"))==null?void 0:s.replace("px",""))||768,i=Number((a=t.getPropertyValue("--breakpoint-pad"))==null?void 0:a.replace("px",""))||1024;return window.innerWidth>r?"desktop":window.innerWidth>n?"laptop":window.innerWidth>i?"pad":"mobile"}l(ut,"DetectDevice");function D(e,t,r){return e+(t-e)*r}l(D,"lerp");function ft(e,t,r,n,i){let o=(e-t)/(r-t);return Math.min(i,Math.max(D(n,i,o),n))}l(ft,"lerpValue");function w(e){let t=[];for(let r=0;r<e.childNodes.length;r++){let n=e.childNodes[r];n.nodeType===8?t.push(n):t.push.apply(t,w(n))}return t}l(w,"findComments");function I(e,t,r,n){if(r===null)return;let i=n;for(let o=0;o<r.length;o++){let s=Number(r[o]);i=i[s]}try{e.insertBefore(i,t)}catch(o){console.error(o),console.log("what is going on here",e)}}l(I,"insertElement");function ht(e,...t){let r="";for(let o=0;o<t.length;o++){if(t[o]instanceof Array){let c=[];for(let u=0;u<t[o].length;u++)t[o][u]instanceof DocumentFragment&&c.push(`<!-- comment-node-${o}.${u} -->`);if(c.length>0){r+=e[o]+c.join(" ");continue}}if(t[o]instanceof DocumentFragment){r+=e[o]+`<!-- comment-node-${o} -->`;continue}let s=e[o].trim(),a=s.match(/.*\s(on|@)([\w-]*)=/);if(a){let[c,u,f]=a,d=s.split(u+f);r+=d[0]+` @${f}="${o}"`}else if(t[o]===void 0){let c=/\w+="$/;r+=e[o].replace(c,"")}else r+=e[o]+t[o]}r+=e[t.length];let n=document.createElement("template");n.innerHTML=r.trim();let i=n.content;return w(i).forEach(o=>{var a;let s=o.parentNode;if(s){let c=(a=o.nodeValue)==null?void 0:a.trim();if(c!=null&&c.startsWith("comment-node")&&o.textContent){let u=o.textContent.match(/\d+/g);I(s,o,u,t)}s.removeChild(o)}}),j(),i.querySelectorAll("*").forEach(o=>{Array.from(o.attributes).forEach(s=>{if(s.name.startsWith("@")){let a=s.name.slice(1),c=Number(o.getAttribute(s.name));o.removeAttribute(s.name),o.addEventListener(a,t[c])}}),o.removeAttribute('"')}),i}l(ht,"html");function O(e,t){if(!t.__eventListeners)for(let r in e.__eventListeners)for(let n of e.__eventListeners[r])t.addEventListener(r,n.listener,n.options)}l(O,"ReapplyEvents");function A(e,t){if(O(e,t),!(e instanceof HTMLSlotElement))for(let r=0;r<e.children.length;r++)A(e.children[r],t.children[r])}l(A,"ReapplyEventsDeep");function j(){if(window.eventListenersBeenInitialized)return;window.eventListenersBeenInitialized=!0;let e=Element.prototype.addEventListener,t=Element.prototype.removeEventListener,r=Element.prototype.cloneNode;Element.prototype.addEventListener=function(n,i,o){this.__eventListeners=this.__eventListeners||{};let s={listener:i,options:o};this.__eventListeners[n]=this.__eventListeners[n]||[];let a=this.__eventListeners[n].findIndex(c=>c.listener===i&&JSON.stringify(c.options)===JSON.stringify(o));a!==-1&&(t.call(this,n,this.__eventListeners[n][a].listener,this.__eventListeners[n][a].options),this.__eventListeners[n].splice(a,1)),this.__eventListeners[n].push(s),e.call(this,n,i,o)},Element.prototype.removeEventListener=function(n,i,o){if(this.__eventListeners&&this.__eventListeners[n]){let s=this.__eventListeners[n].findIndex(a=>a.listener===i&&o===a.options);s!==-1&&this.__eventListeners[n].splice(s,1)}t.call(this,n,i,o)},Element.prototype.cloneNode=function(n){let i=r.call(this,n);return n&&A(this,i),i},Element.prototype.getEventListeners=function(){return this.__eventListeners}}l(j,"InitEventListeners");function bt(e){return e===void 0?void 0:String(e)}l(bt,"ifDefined");function F(e){let t={rerender:!0,verbose:!1,...e||{}};return function(r,n){t.name||(t.name=n),t.attribute||(t.attribute=n);let i=r.connectedCallback;r.connectedCallback=function(){let o=this,s=t.name+"_subcontext";o[s]=!0,i&&i.call(o),t.verbose&&console.log("connected-callback",t);let a=h(o);for(;a&&(t.verbose&&console.log("finding parent",a),!(t.name in a&&!(s in a)||t.attribute&&a.hasAttribute(t.attribute)&&!(s in a)));){if(t.verbose&&console.log("did not find",t.name,"in",a),a===document.documentElement){a=null;break}a=h(a)}if(t.verbose&&console.log("final parent",a),a){let c=l(()=>{t.verbose&&console.log("context-update",t.name,t.attribute);let u=o[t.name];if(t.name in a?o[t.name]=a[t.name]:t.attribute&&a.hasAttribute(t.attribute)&&(o[t.name]=a.getAttribute(t.attribute)),t.applyattribute){if(o[t.name]===void 0)this.removeAttribute(t.attribute);else if(!(o[t.name]instanceof Object)){let f=p(o[t.name],String);this.setAttribute(t.attribute,f)}}t.update&&t.update.call(this,o[t.name],u),t.rerender&&o.requestUpdate()},"operation");c(),a.addEventListener(`context-${t.name}`,c),a.addEventListener("context-manual-change-banana",c)}else console.warn(`Context provider for '${t.name}' not found.`)}}}l(F,"Decorator");function E(e,t){switch(t.name){case"Boolean":return e===null?!1:e===""||e.toLowerCase()==="true";case"Number":return Number(e);case"Object":case"Array":return e===null?null:JSON.parse(e);default:return t(e)}}l(E,"ConvertFromString");function N(e,t){if(!t.shadowRoot){console.error("shadowroot not defined yet!");return}let r=t.shadowRoot.querySelector("style");if(r||(r=document.createElement("style"),t.shadowRoot.appendChild(r)),!e.reactiveStyling&&t.stylecomperator)return;let n=t.getStyle();t.stylecomperator||(t.stylecomperator=document.createElement("style"),r.innerHTML=n),t.stylecomperator.innerHTML=n,t.stylecomperator.innerHTML!==r.innerHTML&&(r.innerHTML=t.stylecomperator.innerHTML)}l(N,"renderStyle");function R(e,t){if(!t.shadowRoot){console.error("shadowroot not defined yet!");return}if(!t.render){console.error("render not defined yet");return}let r=t.render();if(!t.rendercomperator){t.rendercomperator=document.createElement("template"),b(t,r,t.shadowRoot);return}e.reactiveRendering?U(t,r):($(t.shadowRoot),b(t,r,t.shadowRoot))}l(R,"renderHTML");function b(e,t,r){if(["string","number","boolean"].includes(typeof t)){let n=(t||"").toString();if(/</.test(n)&&/>/.test(n))r.innerHTML=r.innerHTML+n;else{let i=document.createTextNode(n);r.appendChild(i)}}else t instanceof DocumentFragment?r.appendChild(t):t instanceof Array&&t.forEach(n=>{b(e,n,r)})}l(b,"freshRender");function $(e){e.childNodes.forEach(t=>{t.nodeName!=="STYLE"&&e.removeChild(t)})}l($,"flushHTML");function U(e,t){var n;if(!e.rendercomperator)return;let r=e.rendercomperator.querySelectorAll("*:not(style)");for(let i of r)(n=i.parentNode)==null||n.removeChild(i);for(;e.rendercomperator.firstChild;)e.rendercomperator.removeChild(e.rendercomperator.firstChild);e.rendercomperator.appendChild(e.stylecomperator),b(e,t,e.rendercomperator),B(e),V(e)}l(U,"diffing");function V(e){e.shadowRoot&&e.rendercomperator&&e.shadowRoot.querySelectorAll("*:not(style)").forEach(t=>{if(!t.parentNode)return;let r=v(e,e.shadowRoot,t);e.rendercomperator.querySelector(r.join(" > "))||r.some(i=>/render-greedy/.test(i))||t.parentNode.removeChild(t)})}l(V,"cleanup");function B(e){if(!e.shadowRoot||!e.rendercomperator)return;let t=e.rendercomperator.cloneNode(!0);t.querySelectorAll("*:not(style)").forEach(r=>{let n=v(e,t,r),i=e.rendercomperator.querySelector(n.join(" > "));if(i){for(let s in i.__eventListeners)if(!r.__eventListeners[s]){let a=i.__eventListeners[s],{listener:c,options:u}=a[a.length-1];r.addEventListener(s,c,u)}}let o=e.querySelector(n.join(" > "));if(o){for(let s=0;s<r.attributes.length;s++){let a=r.attributes[s].name,c=r.attributes[s].value;o.getAttribute(a)!==c&&o.setAttribute(a,c)}r.childNodes.forEach((s,a)=>{var c;if(s.nodeType===Node.TEXT_NODE){if(((c=s.textContent)==null?void 0:c.trim())==="")return;let u=o.childNodes[a];u?u.nodeType===Node.TEXT_NODE?u.textContent!==s.textContent&&(u.textContent=s.textContent):(console.error("[ERROR] if this can be seen we must update (1)"),console.log({shadowTextNode:u,child:s,content:s.textContent})):o.childNodes.length===0?o.textContent=s.textContent:(console.error("[ERROR] if this can be seen we must update (2)"),console.log({child:s,content:s.textContent,shadowNode:o}))}})}else{let s=e.shadowRoot,a=r;if(n.length>1)for(let c=n.length-1;c>=0;c--){let u=e.querySelector(n.slice(0,c).join(" > "));if(u){s=u;break}else a=r.parentElement}if(a){let c=M(e,t,r);c?s==null||s.insertBefore(a,c):s==null||s.appendChild(a)}else console.error("[ERROR] this case should not happen"),console.log({shadowtarget:s,node:r,target:a,path:n})}})}l(B,"clone");function v(e,t,r){let n=[];for(;r!==t;){n.push(W(r));let i=r.parentElement;if(i)r=i;else break}return n.reverse()}l(v,"getComposedPath");function W(e){let t=[e.tagName];if(e.id?t.push("#"+e.id):e.hasAttribute("key")?t.push(`[key="${e.getAttribute("key")}"]`):e.hasAttribute("part")?t.push(`[part="${e.getAttribute("part")}"]`):typeof e.className=="string"&&e.className&&t.push("."+e.className.trim().replace(/ /g,".")),e.hasAttribute("render-greedy")&&t.push("[render-greedy]"),t.length===1&&e.parentNode&&e.parentNode.children.length>1){let r=0;for(let n=0;n<e.parentNode.children.length;n++)if(e.parentNode.children[n]===e){r=n;break}t.push(`:nth-child(${r+1})`)}return t.join("")}l(W,"getSelector");function M(e,t,r){if(r.nextElementSibling){let n=v(e,t,r.nextElementSibling),i=e.querySelector(n.join(" > "));return i||M(e,t,r.nextElementSibling)}return null}l(M,"getNextElement");var m=class extends HTMLElement{constructor(r){super();this.attributeinit=!1;this.delayedAttributes={};this.callAfterRender=[];this.attributeToPropertyMap=new Map;this.hasrendered=!1;this.properties={};this.hasFocus=!1;this.handleblur=l(()=>{this.hasFocus=!1},"handleblur");this.handlefocus=l(()=>{this.hasFocus=!0},"handlefocus");this.setting={updateInterval:100,attributeUpdateInterval:10,reactiveRendering:!0,reactiveStyling:!1,noblur:!1,nofocus:!1,mode:"open",delegatesFocus:!1,noshadow:!1,...r||{}},this.setting.noshadow||this.attachShadow({...this.setting}),this.callAfterRender.push(this.firstRender),this.originalHTML=this.outerHTML,this.setting.noblur||this.addEventListener("blur",this.handleblur),this.setting.noblur||this.addEventListener("focus",this.handlefocus),this.requestUpdate=x(this.requestUpdate,this.setting.updateInterval),this.updateAttribute=x(this.updateAttribute,this.setting.attributeUpdateInterval)}connectedCallback(){var r;this.attributeinit=!1,this.dispatchEvent(new Event("connected")),(r=this.requestUpdate)==null||r.call(this)}disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}attributeChangedCallback(r,n,i){let o=this.delayedAttributes[r];if(delete this.delayedAttributes[r],n!==i&&!o){let s=this.attributeToPropertyMap.get(r);if(s){let a=this.properties[s];a?this[a.propertyKey]=E(i,a.type):console.warn("[BASE]: not delayed not prop options",r)}}}firstRender(){var r;this.hasrendered=!0,(r=this.updateAttribute)==null||r.call(this)}__update(){if(!this.shadowRoot)return;N(this.setting,this),R(this.setting,this);let r,n=this.callAfterRender.reverse();for(;r=n.pop();)typeof r=="object"&&r.callback.call(this,...r.args),r instanceof Function&&r.call(this);this.callAfterRender=[]}render(r){return"Hello From Base Class"}querySelector(r){return r?this.shadowRoot?this.shadowRoot.querySelector(r):null:(console.log("empty string"),null)}originalQuerySelector(r){return r?super.querySelector(r):(console.log("empty string"),null)}getProperties(){return this.properties||{}}getStyle(){var i;let r=this.constructor;return[...(i=r.styles)!=null?i:[],...typeof r.style=="string"?[r.style]:[]].join(" ")}shadow_closest(r){let n=h(this);for(;n;){let i=n.closest(r);if(i)return i;let o=n.querySelector(r);if(o)return o;if(n===document.documentElement)break;n=h(n)}}requestUpdate(){this.__update()}initAttributes(){if(this.attributeinit)return;this.attributeinit=!0;let r=this.attributes;for(let n=0;n<r.length;n++){let i=r[n].name,o=this.attributeToPropertyMap.get(i);if(o&&this.properties[o]){let s=r[n].value;s===""&&(s="true"),this[this.properties[o].propertyKey]=E(s,this.properties[o].type)}}}updateAttribute(){if(this.hasrendered){this.initAttributes();for(let r in this.delayedAttributes){let n=this.delayedAttributes[r];n===void 0?this.removeAttribute(r):this.setAttribute(r,n)}}}};l(m,"CustomElement"),m.observedAttributes=[],S([y({type:Boolean,rerender:!1})],m.prototype,"hasFocus",2);export{p as ConvertToString,at as CumulativeOffset,m as CustomElement,ut as DetectDevice,lt as ExtractSlotValue,ct as FormatNumber,h as NextParent,O as ReapplyEvents,A as ReapplyEventsDeep,F as context,x as debounce,w as findComments,st as generateUUID,ht as html,bt as ifDefined,D as lerp,ft as lerpValue,y as property,q as query};
